/*! LUN-Minifig-Wizard v1.2.6 | 2013-2015 Caleb Ely & rioforce | MIT */
!function(a){"use strict";function b(b){if(b){var c=a(b);c.addClass("selected")}return!0}function c(a,b){j.empty(),f.curImages=[];var c={name:b,images:a[b],number:a[b].length,size:f.size},d=new Worker("js/workers/table-gen.min.js");d.postMessage(c),d.onmessage=function(a){j.html(a.data.table),f.curImages=a.data.fullsize,window.Worker.notNative&&d.terminate()},4===f.size&&c.number>16||6===f.size&&c.number>24?(g.perfectScrollbar({wheelSpeed:1,suppressScrollX:!0}),g.perfectScrollbar("update")):g.perfectScrollbar("destroy")}function d(){return a.ajax({type:"GET",cache:!0,url:"img/images.json",dataType:"json"})}function e(a){if(f.curPartName=a,window.localStorage.hasOwnProperty("images")){var b=JSON.parse(window.localStorage.getItem("images")),e=b.version.split("."),g=document.LUN.version.split(".");g[0]===e[0]&&g[1]===e[1]?c(b,f.curPartName):(g[0]>e[0]||g[1]>e[1])&&d().success(function(a){window.localStorage.setItem("images",JSON.stringify(a)),c(a,f.curPartName)})}else d().success(function(a){window.localStorage.setItem("images",JSON.stringify(a)),c(a,f.curPartName)})}var f={size:4,curImages:[],curPartID:null,curPartName:""},g=a(document.LUN.getVariable("buildArea")),h=a(document.LUN.getVariable("background")),i=a(document.LUN.getVariable("buttonResize")),j=a(document.LUN.getVariable("minifigItems")),k=a(document.LUN.getVariable("buttonNewWindow")),l=a(document.LUN.getVariable("areaMinifigParts")),m=a(document.LUN.getVariable("categoryButtonsTh")),n=a(document.LUN.getVariable("categoryButtonsDiv")),o=a(document.LUN.getVariable("categoryButtonsImg"));k.on("click",function(){var a=document.LUN.encodeQuery();return a&&window.open("window.html"+a,"LUNMinifigWizard","width=600, height=600"),!0}),j.on("click",function(b){if("img"!==b.target.localName.toLowerCase())return!1;var c=a(b.target).parent().attr("id");f.curPartID="#"+c;var d={hat:document.LUN.getVariable("imgHat"),leg:document.LUN.getVariable("imgLeg"),head:document.LUN.getVariable("imgHead"),torso:document.LUN.getVariable("imgTorso"),sword:document.LUN.getVariable("imgSword"),shield:document.LUN.getVariable("imgShield")},e=d[f.curPartName];if(void 0===e)return document.LUN.throwError("internal"),!1;var g=a(f.curPartID);g.hasClass("selected")||(a(".selector").removeClass("selected"),g.addClass("selected"));var h=parseInt(c.substr(c.indexOf("-")+1),10);return a(e).attr("src",f.curImages[h]),!0}),o.on("click",function(){return o.removeClass("bubble active"),a(this).addClass("bubble active"),e(a(this).attr("id")),!0}),i.on("click",function(){4===f.size?(f.size=6,Modernizr.csstransitions?(i.css("transform","translate3d(190px, 0, 0)"),l.css("width","+=180px"),h.css("width","+=180px"),n.css("margin-left","+=48px"),m.css("padding-left","5px"),m.css("padding-right","5px"),g.css("width","+=180px")):(i.animate({left:"+=190px"},300),l.animate({width:"+=180px"},300),h.animate({width:"+=180px"},300),n.animate({"margin-left":"+=48px"},300),m.animate({"padding-left":"5px"},100),m.animate({"padding-right":"5px"},100),g.animate({width:"+=180px"},150)),j.css("margin-left","20px"),i.attr("src","img/ui/Reduce-button.svg")):(f.size=4,Modernizr.csstransitions?(i.css("transform",""),l.css("width",""),h.css("width",""),n.css("margin-left",""),m.css("padding-left",""),m.css("padding-right",""),g.css("width","-=180px")):(i.animate({left:"-=190px"},300),l.animate({width:"-=180px"},300),h.animate({width:"-=180px"},300),n.animate({"margin-left":"-=48px"},300),m.animate({"padding-left":"0px"},100),m.animate({"padding-right":"0px"},100),g.animate({width:"-=180px"},150)),j.css("margin-left","5px"),i.attr("src","img/ui/Enlarge-button.svg")),e(f.curPartName),b(f.curPartID)}),a(function(){return a("#emmet").on("click",function(){var b=a(document.LUN.getVariable("imgSpecial"));b.attr("src").indexOf("empty")>-1?b.attr("src","img/special/Special001.png"):b.attr("src","img/spark/empty.png")}),e("head"),!0})}(jQuery);