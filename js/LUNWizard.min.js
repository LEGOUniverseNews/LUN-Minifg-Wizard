/* LUN-Minifig-Wizard - v1.2.2
http://LEGOUniverseNews.github.io/LUN-Minifig-Wizard
Created 2013-2015 Triangle717 and rioforce; Licensed under the The MIT License
*/
!function(a){"use strict";a(function(){var b="#error-link{text-decoration:none;}#error-link:hover{text-decoration:underline;}",c="<p class='error'>Your browser is not supported!<br>Please update your browser to enjoy the<br><span>LEGO Universe News!</span> Minifig Wizard.</p><p class='error'>You can research newer browsers at&nbsp;<a id='error-link' target='_blank' href='http://browsehappy.com/'>browsehappy.com</a></p>",d={color:"#f00","font-size":"1.9em","font-weight":"700","font-family":"Times New Roman, serif","margin-left":"0.9em"};return Modernizr.borderradius?void 0:(a("body").remove(),a("html").html("<head />").append("<body />"),a("head").append("<meta name='viewport' content='width=device-width, initial-scale=1.0'>").append("<style />"),a("style").html(b),a("body").html(c).css(d),a("span").css("font-style","italic"),!1)})}(jQuery),function(a){"use strict";function b(a){return a.charAt(0).toUpperCase()+a.substr(1)}function c(b){if(b){var c=a(b);c.addClass("selected")}return!0}function d(c,d){l.empty(),h.curImages.length>0&&(h.curImages=[]);var e=c[d].length-1,f=["<tr><td class='selector' id='",d,"-0'>"];a.each(c[d],function(a,c){var g=a+1,i=c.thumbnail;h.curImages.push(c.fullsize),f.push("<img alt='",b(d)," #",a,"' width='64' height='64' src='",i,"'>"),a!==e&&g%h.size===0&&0!==a?f.push("</td></tr><tr><td class='selector' id='",d,"-",g,"'>"):a!==e?f.push("</td><td class='selector' id='",d,"-",g,"'>"):f.push("</td>")}),l.html(f.join("").replace(/'/g,'"')),4===h.size&&e>16||6===h.size&&e>24?(i.perfectScrollbar({wheelSpeed:1,suppressScrollX:!0}),i.perfectScrollbar("update")):i.perfectScrollbar("destroy")}function e(){return a.ajax({type:"GET",cache:!0,url:"img/images.json",dataType:"json"})}function f(a){if(h.curPartName=a,window.sessionStorage.hasOwnProperty("images")){var b=JSON.parse(window.sessionStorage.getItem("images"));document.LUN.version===b.version?d(b,h.curPartName):document.LUN.version>b.version&&e().success(function(a){window.sessionStorage.setItem("images",JSON.stringify(a)),d(a,h.curPartName)})}else e().success(function(a){window.sessionStorage.setItem("images",JSON.stringify(a)),d(a,h.curPartName)})}var g,h={size:4,curImages:[],curPartID:null,curPartName:""},i=a(document.LUN.getVariable("buildArea")),j=a(document.LUN.getVariable("background")),k=a(document.LUN.getVariable("buttonResize")),l=a(document.LUN.getVariable("minifigItems")),m=a(document.LUN.getVariable("buttonNewWindow")),n=a(document.LUN.getVariable("areaMinifigParts")),o=a(document.LUN.getVariable("categoryButtonsTh")),p=a(document.LUN.getVariable("categoryButtonsDiv")),q=a(document.LUN.getVariable("categoryButtonsImg"));m.on("click",function(){var a=document.LUN.encodeQuery();return a&&window.open("window.html"+a,"LUNMinifigWizard","width=600, height=600"),!0}),l.on("click",function(b){if("img"!==b.target.localName.toLowerCase())return!1;var c=a(b.target).parent().attr("id");h.curPartID="#"+c;var d={hat:document.LUN.getVariable("imgHat"),leg:document.LUN.getVariable("imgLeg"),head:document.LUN.getVariable("imgHead"),torso:document.LUN.getVariable("imgTorso"),sword:document.LUN.getVariable("imgSword"),shield:document.LUN.getVariable("imgShield")},e=d[h.curPartName];if(void 0===e)return document.LUN.throwError("internal"),!1;var f=a(h.curPartID);f.hasClass("selected")||(a(g).removeClass("selected"),f.addClass("selected")),g="#"+c;var i=parseInt(c.substr(c.indexOf("-")+1),10);return a(e).attr("src",h.curImages[i]),!0}),q.on("click",function(){return q.removeClass("bubble active"),a(this).addClass("bubble active"),f(a(this).attr("id")),!0}),k.on("click",function(){4===h.size?(h.size=6,Modernizr.csstransitions?(k.css("transform","translate3d(190px, 0, 0)"),n.css("width","+=180px"),j.css("width","+=180px"),p.css("margin-left","+=48px"),o.css("padding-left","5px"),o.css("padding-right","5px"),i.css("width","+=180px")):(k.animate({left:"+=190px"},300),n.animate({width:"+=180px"},300),j.animate({width:"+=180px"},300),p.animate({"margin-left":"+=48px"},300),o.animate({"padding-left":"5px"},100),o.animate({"padding-right":"5px"},100),i.animate({width:"+=180px"},150)),l.css("margin-left","20px"),k.attr("src","img/ui/Reduce-button.svg")):(h.size=4,Modernizr.csstransitions?(k.css("transform",""),n.css("width",""),j.css("width",""),p.css("margin-left",""),o.css("padding-left",""),o.css("padding-right",""),i.css("width","-=180px")):(k.animate({left:"-=190px"},300),n.animate({width:"-=180px"},300),j.animate({width:"-=180px"},300),p.animate({"margin-left":"-=48px"},300),o.animate({"padding-left":"0px"},100),o.animate({"padding-right":"0px"},100),i.animate({width:"-=180px"},150)),l.css("margin-left","5px"),k.attr("src","img/ui/Enlarge-button.svg")),f(h.curPartName),c(h.curPartID)}),a(function(){return a("#emmet").on("click",function(){var b=a(document.LUN.getVariable("imgSpecial"));b.attr("src").indexOf("empty")>-1?b.attr("src","img/special/Special001.png"):b.attr("src","img/spark/empty.png")}),f("head"),!0})}(jQuery);