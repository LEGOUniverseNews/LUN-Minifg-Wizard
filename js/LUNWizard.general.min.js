/* LUN-Minifig-Wizard - v1.2.0
http://LEGOUniverseNews.github.io/LUN-Minifig-Wizard
Created 2013-2015 Triangle717 and rioforce; Licensed under the The MIT License
*/
function _getVariable(a){"use strict";var b={imgHat:"#img-hat",imgLeg:"#img-leg",imgHead:"#img-head",imgTorso:"#img-torso",imgSword:"#img-sword",buildArea:"#area-minifig-built",imgShield:"#img-shield",imgShadow:"#img-shadow",background:"#background",imgSpecial:"#img-special",buttonResize:"#btn-resize",minifigItems:"#minifig-items",buttonNewWindow:"#btn-new-window",areaMinifigParts:".area-minifig-parts",categoryButtonsTh:".category-buttons-th",categoryButtonsDiv:"#category-buttons-div",categoryButtonsImg:".category-buttons-img"};return b[a]}document.LUN={version:"1.2.0"},document.LUN.getVariable=_getVariable,function(){"use strict";function a(a){var b={spark:"You need to finish creating your minifigure!",notfound:"That Minifigure part was not found!",internal:"An internal error has occurred"};return console.log(b[a]),!1}function b(a){var b=a.split("=");return void 0!==g[b[0]]&&/^h(?=a)?(?![b-z])|^a|^e|^l|^t|^s(?:p|h|w)\/\d{1,2}$/gi.test(b[1])}function c(c){var d=/(?:h|f)(?:tt?ps?|ile):?/gi;return void 0===c||d.test(c)||!c.substr(1).split("&").every(b)?(a("internal"),!1):!0}function d(){var b=window.location.search;if(!c(b))return a("internal"),!1;var d=[],e={},f=Object.keys(e).length;if(b.substr(1).split("&").forEach(function(a){e[a.split("=")[0]]=a.split("=")[1]}),6===f||7===f)return a("spark"),!1;for(var h in e)if(e.hasOwnProperty(h)){var i=e[h];i="/"+i,i=i.split("/"),i[0]="/img","e"===i[1]?i[1]=i[1].replace(/e/,"spark"):"sp"!==h?i[1]=g[h]+"/full":"sp"===h&&(i[1]=g[h]),"spark"===i[1]?i[2]="empty":2===i[2].length?i[2]="0"+i[2]:1===i[2].length&&(i[2]="00"+i[2]),"empty"!==i[2]&&(i[2]=g[h.toUpperCase()]+i[2]),i[2]+=".png",i=i.join("/"),d.push(i)}return d}function e(){var b="",d="",e={heads:document.querySelector(document.LUN.getVariable("imgHead")).src,hats:document.querySelector(document.LUN.getVariable("imgHat")).src,legs:document.querySelector(document.LUN.getVariable("imgLeg")).src,torso:document.querySelector(document.LUN.getVariable("imgTorso")).src,sword:document.querySelector(document.LUN.getVariable("imgSword")).src,shield:document.querySelector(document.LUN.getVariable("imgShield")).src,special:document.querySelector(document.LUN.getVariable("imgSpecial")).src};for(var g in e)if(e.hasOwnProperty(g)){var h=e[g],i=/-spark/gi.test(h),j=/empty.png/i.test(h);if(i&&!j)return a("spark"),!1;var k=h.replace(window.location.origin,"").replace(/img\/|full\/|.png/g,"").split("/");k[0]="heads"!==g?"&":"?",k[1]=/ha|s(?:h|p|w)/i.test(k[1])?f[g]:f[k[1]],k[1]+="=",k[2]=k[2].replace(/0/g,""),isNaN(k[2].substr(-2))?isNaN(k[2].substr(-1))||(d=k[2].substr(-1)):d=k[2].substr(-2),k[2]=/empty/.test(k[2])?"e/1":f[k[2].replace(d,"")].toLowerCase()+"/"+d,b+=k.join("")}return c(b)?b:(a("internal"),!1)}var f={},g={h:"heads",H:"Head",t:"torsos",T:"Torso",l:"legs",L:"Legs",ha:"hats",HA:"Hat",sh:"shield",SH:"Shield",sw:"sword",SW:"Sword",sp:"special",SP:"Special"};!function(){for(var a in g)g.hasOwnProperty(a)&&(f[g[a]]=a)}(),document.LUN.throwError=a,document.LUN.decodeQuery=d,document.LUN.encodeQuery=e}();